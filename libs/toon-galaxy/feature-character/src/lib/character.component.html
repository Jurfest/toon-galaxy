<section class="flex flex-col items-center px-6 py-12 max-md:px-5">
  <header
    class="flex gap-2 justify-between max-w-full whitespace-nowrap w-[720px] max-md:flex-wrap"
  >
    <design-system-heading
      [label]="(isFavorites$ | async) ? 'Favoritos' : 'Início'"
      [withBorder]="true"
      font="creepster"
    ></design-system-heading>

    @if ((isFavorites$ | async) === false) {
      <form [formGroup]="searchCharactersForm" class="search-form">
        <mat-form-field
          class="search-form-field"
          appearance="outline"
          [class.has-text]="searchCharactersForm.get('search')?.value"
        >
          <mat-label>Pesquisar</mat-label>
          <input
            matInput
            type="text"
            formControlName="search"
            placeholder=""
            class="input-field"
          />
        </mat-form-field>
      </form>
    }
  </header>

  @if ((isFavorites$ | async) === false) {
    <!-- @if (characterViewModelList$ | async; as characterViewModelList) {
      @if (characterViewModelList.length > 0) {
        <design-system-card-list
          [cardList]="
            (isFavorites$ | async)
              ? (favCharacterViewModelList$ | async) || []
              : characterViewModelList
          "
          (favCardUpdate)="updateFavorites($event)"
        ></design-system-card-list>
      } @else if (this.loaded$ | async) {
        NOTE: - Improve conditions to show empty result?
        <design-system-empty-result></design-system-empty-result>
      }
    } -->
    @if (((characterViewModelList$ | async) || []).length > 0) {
      <design-system-card-list
        [cardList]="(characterViewModelList$ | async) || []"
        (favCardUpdate)="updateFavorites($event)"
      ></design-system-card-list>
    } @else if (loaded$ | async) {
      <design-system-empty-result></design-system-empty-result>
    }
  } @else {
    @if (((favCharacterViewModelList$ | async) || []).length > 0) {
      <design-system-card-list
        [cardList]="(favCharacterViewModelList$ | async) || []"
        (favCardUpdate)="updateFavorites($event)"
      ></design-system-card-list>
    } @else {
      <design-system-empty-result
        headingContent="Parece que você ainda não tem favoritos"
        paragraphContent="Volte à página inicial e escolha os melhores para você."
      >
        <design-system-button (buttonClickEvent)="navigateToHome()"
          >Voltar ao início</design-system-button
        >
      </design-system-empty-result>
    }
  }
</section>
